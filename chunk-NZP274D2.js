import{a as at,b as D}from"./chunk-CGDPKWZI.js";import{a as J,b as N,c as rt,d as st}from"./chunk-KRM52EVC.js";import{a as et,b as it,c as ot,d as nt}from"./chunk-TTHETTFZ.js";import{a as z,b as X,c as Y,d as Z,e as tt}from"./chunk-B3LSVMYY.js";import{$ as f,Da as E,Ea as O,Fa as H,Ga as T,L as l,O as g,Oa as Q,Q as u,R as B,Ra as L,Ta as F,U as y,Va as $,Xa as _,Y as p,Z as d,Za as K,_ as m,_a as U,da as A,ja as v,ka as C,la as I,ma as R,na as G,oa as W,pa as q,t as x,ua as b,va as S,wa as V}from"./chunk-H6OBQRAG.js";function ut(i,t){if(i&1&&(d(0,"span",5),v(1),m()),i&2){let r=t.$implicit;l(),C(r)}}var pt=(()=>{let t=class t{constructor(){this._title="",this._content="",this._tags=[]}get title(){return this._title}get content(){return this._content}get date(){return this._date}get tags(){return this._tags}};t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=u({type:t,selectors:[["app-viewer"]],inputs:{_title:"_title",_content:"_content",_date:"_date",_tags:"_tags"},standalone:!1,decls:8,vars:7,consts:[[1,"viewerWrapper"],[1,"date"],[1,"title"],["class","tag is-warning is-light",4,"ngFor","ngForOf"],[3,"data"],[1,"tag","is-warning","is-light"]],template:function(e,n){e&1&&(d(0,"div",0)(1,"p",1),v(2),b(3,"date"),m(),d(4,"h1",2),v(5),m(),y(6,ut,2,1,"span",3),f(7,"markdown",4),m()),e&2&&(l(2),C(V(3,4,n.date,"dd.MM.yyyy")),l(3),I(" ",n.title," "),l(),p("ngForOf",n.tags),l(),p("data",n.content))},dependencies:[E,at,H],styles:[".tag[_ngcontent-%COMP%]{margin-right:7px;margin-bottom:15px}.date[_ngcontent-%COMP%]{margin-bottom:5px}.viewerWrapper[_ngcontent-%COMP%]{margin:auto;max-width:1000px}"]});let i=t;return i})();var gt=(()=>{let t=class t{constructor(o,e,n,a){this.translate=o,this.route=e,this.router=n,this.blogService=a,this._blogpost=new J,this._isEnglish=!1}ngOnInit(){this._isEnglish=this.translate.currentLang==="en";let o=Number(this.route.snapshot.paramMap.get("blogpostId"));this.blogService.getBlogpostArticleById$(o).subscribe(e=>{this._blogpost=e},e=>{this.router.navigate(["blog"])}),this.onLangChange=this.translate.onLangChange.subscribe(e=>{this._isEnglish=e.lang==="en"})}ngOnDestroy(){this.onLangChange.unsubscribe()}get blogpost(){return this._blogpost}get isEnglish(){return this._isEnglish}};t.\u0275fac=function(e){return new(e||t)(g(_),g(L),g(F),g(N))},t.\u0275cmp=u({type:t,selectors:[["app-blogpost-page"]],standalone:!1,decls:1,vars:4,consts:[[3,"_title","_content","_tags","_date"]],template:function(e,n){e&1&&f(0,"app-viewer",0),e&2&&p("_title",n.isEnglish?n.blogpost.titleEN:n.blogpost.titleDE)("_content",n.isEnglish?n.blogpost.contentEN:n.blogpost.contentDE)("_tags",n.blogpost.tags)("_date",n.blogpost.date)},dependencies:[pt],encapsulation:2});let i=t;return i})();var P=class i{static getDescendantProperty(t,r,o=[]){let e,n,a,s,c,h;if(r){if(a=r.indexOf("."),a===-1?e=r:(e=r.slice(0,a),n=r.slice(a+1)),s=t[e],s!==null&&typeof s<"u")if(!n&&(typeof s=="string"||typeof s=="number"))o.push(s);else if(Object.prototype.toString.call(s)==="[object Array]")for(c=0,h=s.length;c<h;c++)i.getDescendantProperty(s[c],n,o);else n&&i.getDescendantProperty(s,n,o)}else o.push(t);return o}};var w=class i{constructor(t=[],r=[],o={}){Array.isArray(r)||(o=r,r=[]),this.haystack=t,this.keys=r,this.options=Object.assign({caseSensitive:!1,sort:!1},o)}search(t=""){if(t==="")return this.haystack;let r=[];for(let o=0;o<this.haystack.length;o++){let e=this.haystack[o];if(this.keys.length===0){let n=i.isMatch(e,t,this.options.caseSensitive);n&&r.push({item:e,score:n})}else for(let n=0;n<this.keys.length;n++){let a=P.getDescendantProperty(e,this.keys[n]),s=!1;for(let c=0;c<a.length;c++){let h=i.isMatch(a[c],t,this.options.caseSensitive);if(h){s=!0,r.push({item:e,score:h});break}}if(s)break}}return this.options.sort&&r.sort((o,e)=>o.score-e.score),r.map(o=>o.item)}static isMatch(t,r,o){t=String(t),r=String(r),o||(t=t.toLocaleLowerCase(),r=r.toLocaleLowerCase());let e=i.nearestIndexesFor(t,r);return e?t===r?1:e.length>1?2+(e[e.length-1]-e[0]):2+e[0]:!1}static nearestIndexesFor(t,r){let o=r.split(""),e=[];return i.indexesOfFirstLetter(t,r).forEach((a,s)=>{let c=a+1;e[s]=[a];for(let h=1;h<o.length;h++){let ht=o[h];if(c=t.indexOf(ht,c),c===-1){e[s]=!1;break}e[s].push(c),c++}}),e=e.filter(a=>a!==!1),e.length?e.sort((a,s)=>a.length===1?a[0]-s[0]:(a=a[a.length-1]-a[0],s=s[s.length-1]-s[0],a-s))[0]:!1}static indexesOfFirstLetter(t,r){let o=r[0];return t.split("").map((e,n)=>e!==o?!1:n).filter(e=>e!==!1)}};function Ct(i,t){i&1&&(d(0,"div",6),v(1),b(2,"translate"),m()),i&2&&(l(),I(" ",S(2,1,"blog.list.error"),`
`))}function It(i,t){i&1&&(d(0,"div",7),v(1),b(2,"translate"),m()),i&2&&(l(),I(" ",S(2,1,"blog.list.warning"),`
`))}function St(i,t){if(i&1&&(d(0,"div")(1,"div",8),f(2,"app-blog-box",9),m()()),i&2){let r=t.$implicit;l(2),p("_blogpost",r)("_centerContent",!0)}}var mt=(()=>{let t=class t{constructor(o,e){this.blogService=o,this.translate=e,this.query="",this._blogposts=[]}ngOnInit(){this.blogService.getAllBlogposts$().subscribe(o=>{this.searcherDE=new w(o,["tags","titleDE","contentDE","descDE"],{sort:!0}),this.searcherEN=new w(o,["tags","titleEN","contentEN","descEN"],{sort:!0}),this._blogposts=o})}onSearchType(){console.log("Query updated to: "+this.query),console.log("Query search result: "),localStorage.getItem("lang")=="de"?(console.log(this.searcherDE.search(this.query)),this._blogposts=this.searcherDE.search(this.query)):(console.log(this.searcherEN.search(this.query)),this._blogposts=this.searcherEN.search(this.query))}get blogposts(){return this._blogposts}};t.\u0275fac=function(e){return new(e||t)(g(N),g(_))},t.\u0275cmp=u({type:t,selectors:[["app-blogpost-list"]],standalone:!1,decls:9,vars:11,consts:[[1,"title","has-text-centered"],[1,"control","searchbar"],["type","text",1,"input",3,"ngModelChange","ngModel","placeholder"],["class","subtitle has-text-danger-dark has-text-centered warning",4,"ngIf"],["class","subtitle has-text-warning-dark has-text-centered warning",4,"ngIf"],[4,"ngFor","ngForOf"],[1,"subtitle","has-text-danger-dark","has-text-centered","warning"],[1,"subtitle","has-text-warning-dark","has-text-centered","warning"],[1,"blogpost-container"],[3,"_blogpost","_centerContent"]],template:function(e,n){e&1&&(d(0,"h1",0),v(1),b(2,"translate"),m(),d(3,"div",1)(4,"input",2),b(5,"translate"),W("ngModelChange",function(s){return G(n.query,s)||(n.query=s),s}),A("ngModelChange",function(){return n.onSearchType()}),m()(),y(6,Ct,3,3,"div",3)(7,It,3,3,"div",4)(8,St,3,2,"div",5)),e&2&&(l(),C(S(2,7,"blog.list.title")),l(3),p("placeholder",q(S(5,9,"blog.list.searchplaceholder"))),R("ngModel",n.query),l(2),p("ngIf",n.blogposts.length===0&&n.query.length>2),l(),p("ngIf",n.blogposts.length===0&&n.query.length>0&&n.query.length<3),l(),p("ngForOf",n.blogposts))},dependencies:[E,O,et,it,ot,rt,K],styles:[".searchbar[_ngcontent-%COMP%]{max-width:500px;margin:auto}.blogpost-container[_ngcontent-%COMP%]{margin-top:30px}.warning[_ngcontent-%COMP%]{margin-top:40px}"]});let i=t;return i})();function wt(i,t){i&1&&f(0,"app-blogpost-list")}function xt(i,t){i&1&&f(0,"app-blogpost-page")}var k=(()=>{let t=class t{constructor(o,e,n,a){this.translate=o,this.titleService=e,this.route=n,this.router=a,this.CurrentPage=z,this.viewState=j.LIST,this.ViewState=j}ngOnInit(){this.route.params.subscribe(o=>{o.blogpostId&&(isNaN(Number(o.blogpostId))?this.router.navigate(["/blog"]):(this.viewState=j.BLOGPOST,this.blogpostId=Number(o.blogpostId)))}),this.translate.get("blog.title").subscribe(o=>{this.titleService.setTitle("Felix Flesch | "+o)})}};t.\u0275fac=function(e){return new(e||t)(g(_),g(Q),g(L),g(F))},t.\u0275cmp=u({type:t,selectors:[["app-blog"]],standalone:!1,decls:6,vars:3,consts:[[3,"currentPage"],[1,"section"],[1,"container","is-center"],[4,"ngIf"]],template:function(e,n){e&1&&(f(0,"app-nav-bar",0),d(1,"section",1)(2,"div",2),y(3,wt,1,0,"app-blogpost-list",3)(4,xt,1,0,"app-blogpost-page",3),m()(),f(5,"app-footer")),e&2&&(p("currentPage",n.CurrentPage.BLOG),l(3),p("ngIf",n.viewState===n.ViewState.LIST),l(),p("ngIf",n.viewState===n.ViewState.BLOGPOST))},dependencies:[O,X,Y,gt,mt],encapsulation:2});let i=t;return i})(),j=function(i){return i[i.LIST=0]="LIST",i[i.BLOGPOST=1]="BLOGPOST",i}(j||{});var Bt=[{path:"",component:k},{path:":blogpostId",component:k},{path:"**",redirectTo:"",pathMatch:"full"}],dt=$.forChild(Bt);var ft=(()=>{let t=class t{};t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=B({type:t}),t.\u0275inj=x({imports:[T,D.forChild()]});let i=t;return i})();var ce=(()=>{let t=class t{};t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=B({type:t}),t.\u0275inj=x({imports:[T,dt,U,Z,tt,nt,st,D.forChild(),ft]});let i=t;return i})();export{ce as BlogModule};
